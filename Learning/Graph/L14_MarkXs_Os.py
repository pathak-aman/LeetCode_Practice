class Solution():
    def __init__(self):
        # left, top, right, bottom
        self.delx = [-1, 0, +1, 0]
        self.dely = [0, -1, 0, +1]


    def dfs(self, i,j, grid):
        print(f'dfs{i,j}')
        for dx, dy in zip(self.delx, self.dely):
            x_new, y_new = i+dx, j+dy
            if 0 <= x_new < self.m and 0 <= y_new < self.n and not self.visited[x_new][y_new] and grid[x_new][y_new] == "O":
                self.visited[x_new][y_new] = 1
                self.dfs(x_new, y_new, grid)


    def updateXs(self, grid):
        self.m,self.n = len(grid),len(grid[0])
        self.visited = [[0 for i in range(self.n)] for j in range(self.m)]

        # Traverse first and last row:
        for j in range(self.n):
            if grid[0][j] == "O" and not self.visited[0][j]:
                self.visited[0][j] = 1
                self.dfs(0,j,grid)
            
            if grid[self.m-1][j] == "O" and not self.visited[self.m-1][j]:
                print(self.m-1,j)
                self.visited[self.m-1][j] = 1
                self.dfs(self.m-1,j,grid)


        for j in range(self.m):
            if grid[j][0] == "O" and not self.visited[j][0]:
                self.visited[j][0] = 1
                self.dfs(j,0,grid)
            
            if grid[j][self.n-1] == "O" and not self.visited[j][self.n-1]:
                self.visited[j][self.n-1] = 1
                self.dfs(j,self.n-1,grid)
        
        for i in range(self.m):
            for j in range(self.n):
                if grid[i][j] == "O" and not self.visited[i][j]:
                    grid[i][j] = "X"
        # print(self.visited)
        return grid



board = [["X","X","X","X"],["X","O","O","X"],["X","X","O","X"],["X","O","X","X"]]
# board = [["X","X","X","X"],["X","O","O","X"],["X","O","O","X"],["X","O","X","X"]]
board = [["X","O","X","X","O","O","X","O","O","X","X","O","O","X","O","O","X","X","O","X","X","X","X","O","X","X","X","O","O","X","O","O","O","O","O","O","X","O","O","O","O","X","X","X","X","X","O","O","O","O"],["X","O","X","O","X","O","X","X","X","O","X","X","O","O","O","O","O","X","X","O","O","X","X","X","O","O","X","X","O","X","X","O","O","O","O","X","O","X","X","X","O","O","X","O","O","O","X","O","O","X"],["X","O","X","X","X","O","O","X","O","X","X","X","X","O","X","O","O","O","X","X","X","X","X","O","X","O","O","O","O","X","X","X","X","X","X","O","O","X","X","X","O","X","O","X","X","O","X","X","O","O"],["O","X","X","X","O","X","X","O","O","O","X","X","O","O","O","O","O","X","X","X","O","O","O","O","O","O","O","X","O","O","O","O","X","X","O","O","X","X","X","X","X","O","O","X","O","X","X","O","O","X"],["O","X","X","O","X","O","O","X","O","O","O","X","X","X","X","X","O","X","O","X","O","O","O","X","O","X","O","X","O","O","O","O","X","X","X","O","X","O","O","O","O","O","O","O","O","X","O","X","X","X"],["X","X","O","O","X","X","X","X","X","X","O","O","O","O","O","O","X","O","X","X","O","O","O","O","O","X","O","X","O","X","O","O","X","O","O","O","O","X","X","O","X","X","X","X","O","O","O","X","X","O"],["X","O","O","X","O","X","O","O","X","O","X","X","O","O","X","O","O","X","X","O","X","X","O","O","O","X","X","O","O","O","X","O","X","X","O","X","X","O","O","X","X","X","X","X","O","O","X","O","O","X"],["O","O","X","X","X","X","O","O","X","X","X","X","X","O","O","X","X","X","O","X","X","O","O","X","O","O","X","X","X","O","X","X","X","O","O","X","X","X","X","X","O","X","O","X","O","X","O","X","X","X"],["X","X","X","O","O","O","X","X","O","O","X","O","X","O","X","O","O","O","O","X","O","X","X","X","O","O","X","O","X","X","X","O","O","X","O","X","X","O","O","X","X","O","X","O","X","X","X","X","X","O"],["X","O","X","O","O","X","X","O","X","X","O","X","O","O","O","X","X","X","O","O","X","X","X","X","O","O","O","X","X","O","O","O","O","O","X","O","O","X","O","X","O","X","O","O","O","O","O","O","X","O"],["X","X","O","O","O","O","O","O","X","O","X","X","O","O","O","O","X","O","O","X","X","X","X","X","O","O","X","X","X","X","X","O","X","X","X","O","X","X","X","O","O","O","X","O","O","X","X","O","X","X"],["X","O","X","O","O","X","X","O","X","X","X","X","X","X","X","O","O","O","X","X","X","X","O","X","X","O","X","O","X","O","O","O","O","O","X","O","O","O","O","O","O","X","O","X","X","X","O","O","X","X"],["O","O","X","O","X","X","O","X","X","X","X","X","X","X","O","O","O","X","X","X","O","O","X","O","O","X","X","X","O","O","O","O","O","X","X","O","X","O","X","O","O","O","O","X","O","X","X","O","X","X"],["O","X","X","X","O","O","O","O","X","O","X","X","X","O","X","O","X","X","O","X","O","O","X","X","X","X","O","O","X","O","O","X","O","X","X","X","X","O","X","O","O","X","O","X","O","X","X","X","X","X"],["O","O","X","X","O","X","X","X","X","X","X","X","X","O","X","X","O","O","O","X","O","O","X","O","X","X","O","O","X","O","O","O","O","O","X","X","O","O","X","O","O","X","X","O","O","X","X","O","X","X"],["O","O","X","X","X","O","O","X","O","O","X","O","X","X","O","O","X","O","O","O","O","O","X","O","X","O","X","X","X","O","X","O","X","X","O","O","O","X","O","O","O","X","X","X","X","X","X","X","O","O"],["O","O","O","O","X","X","X","O","O","O","O","O","O","O","O","O","X","O","X","O","O","X","O","X","X","X","O","O","O","O","X","X","X","O","X","O","X","X","X","X","O","X","O","O","O","O","O","O","O","X"],["X","X","O","O","X","X","X","O","O","X","O","X","X","X","O","X","X","X","X","O","O","X","O","O","X","O","O","O","O","X","X","X","O","X","X","X","O","X","O","X","O","O","X","X","X","O","O","X","X","O"],["O","X","X","O","O","X","O","X","O","O","O","O","O","O","O","X","O","X","X","X","O","O","O","O","O","X","X","X","X","X","O","O","O","X","X","X","O","O","O","O","X","O","O","O","X","X","O","O","X","X"],["O","O","X","O","O","X","O","X","X","O","O","X","X","X","O","O","X","O","O","O","O","O","O","O","O","X","X","O","X","X","X","O","X","O","O","O","X","X","O","X","O","X","O","X","X","X","O","O","X","O"],["X","O","O","X","O","X","O","X","X","X","X","O","X","X","X","X","X","O","O","X","O","O","X","X","X","O","X","X","X","O","O","X","X","O","X","O","O","O","X","X","X","O","X","X","X","X","O","X","X","X"],["X","O","X","X","O","O","O","O","O","O","O","X","X","O","X","O","O","X","X","O","X","X","X","X","O","O","X","O","X","X","O","X","O","X","O","O","X","O","X","O","X","O","X","O","X","O","O","X","X","O"],["O","X","X","O","X","X","X","X","X","O","O","O","O","O","X","X","O","X","X","O","O","O","X","X","O","X","X","O","X","X","X","X","O","X","X","O","X","X","O","O","O","O","O","X","X","O","X","X","X","O"],["O","X","X","X","O","X","X","O","X","O","O","X","X","X","X","O","X","X","X","X","X","O","X","X","X","X","O","O","O","O","O","O","O","O","X","X","X","O","X","X","X","O","X","O","O","O","O","O","O","O"],["O","O","X","O","O","O","O","X","O","O","X","X","O","O","X","O","O","O","X","X","O","X","X","O","O","X","X","X","O","X","X","X","O","X","X","O","X","X","X","O","X","X","X","O","X","X","X","X","O","O"],["X","X","O","X","O","O","O","O","O","O","X","X","X","O","X","O","O","X","X","O","X","O","O","O","X","O","O","X","X","O","O","X","O","X","O","O","O","X","O","O","O","O","X","X","O","X","O","X","X","X"],["O","O","O","X","X","X","O","X","X","X","O","O","X","O","X","O","O","O","X","O","O","O","O","X","X","O","X","X","X","X","O","X","O","X","X","X","O","X","O","X","X","O","X","X","X","O","X","X","O","X"],["O","O","O","O","X","O","X","O","X","X","X","X","O","X","X","O","X","X","X","O","O","X","O","X","X","X","O","O","O","X","X","O","X","O","O","X","X","X","X","X","O","X","O","O","X","X","X","O","X","X"],["X","X","X","O","O","O","X","O","O","O","O","X","X","O","O","O","O","O","X","X","X","O","O","O","O","X","O","X","O","O","X","X","O","X","X","X","O","X","O","O","X","X","X","X","O","X","X","O","O","O"],["O","O","X","O","X","O","X","O","O","X","X","X","X","O","O","X","O","X","O","O","O","X","O","X","X","O","O","X","O","O","O","X","X","X","X","X","O","O","O","O","O","O","O","X","X","O","X","X","O","X"],["O","X","X","O","O","X","X","X","O","X","X","X","O","O","X","O","X","O","X","O","X","O","X","O","X","X","O","O","X","O","X","X","O","X","X","O","O","O","O","X","X","O","O","O","O","X","O","O","X","X"],["X","X","O","X","X","O","X","O","O","X","X","O","X","X","O","X","X","O","X","O","O","O","O","O","X","O","X","O","X","O","X","X","O","X","O","O","X","X","X","X","O","X","X","X","O","X","O","O","X","X"],["O","X","O","X","X","X","O","O","O","O","O","O","X","O","X","O","O","X","X","X","X","O","X","O","O","O","O","X","X","X","X","X","O","X","O","X","O","X","O","O","O","X","X","X","O","X","X","O","X","O"],["O","X","X","X","X","X","X","O","X","O","O","X","O","O","X","O","O","X","O","O","X","X","X","X","O","O","O","O","X","O","X","X","X","X","X","O","O","O","X","X","X","O","O","O","X","O","O","X","O","O"],["O","X","X","X","X","X","O","O","X","O","O","O","O","X","O","O","X","X","O","X","O","O","O","O","O","O","X","X","O","X","O","O","O","X","O","X","O","O","O","O","O","X","O","O","O","O","O","X","O","O"],["O","X","X","O","O","X","O","X","O","X","O","O","O","O","X","O","O","O","O","X","X","O","X","O","X","O","O","X","O","O","X","O","O","O","O","O","X","O","X","O","X","O","X","O","X","X","X","O","O","X"],["O","O","O","O","X","X","O","X","O","O","X","X","X","X","X","X","X","O","X","O","O","X","O","O","X","X","X","O","X","O","O","X","X","X","O","X","O","O","X","O","X","X","X","O","X","X","X","X","O","O"],["X","O","O","X","X","X","X","O","X","O","O","X","X","O","O","X","O","O","X","X","O","X","O","O","X","O","X","X","O","X","O","O","X","O","O","O","X","X","X","O","X","X","X","X","X","O","X","X","O","O"],["O","O","O","X","X","O","O","X","O","X","X","X","O","X","O","O","O","O","O","X","X","O","X","O","O","X","O","X","X","X","O","O","X","X","O","X","X","X","X","X","X","O","X","O","X","X","X","O","X","O"],["O","O","X","O","O","O","X","O","O","X","X","O","X","X","O","O","X","X","X","O","O","X","X","X","X","O","X","X","X","X","X","O","X","O","O","X","X","X","O","O","X","X","X","X","X","O","O","X","O","O"],["X","O","X","X","X","O","O","O","O","X","X","O","X","X","O","O","X","X","X","O","X","O","O","O","O","O","X","O","X","X","X","X","O","O","O","X","X","O","O","X","X","O","X","O","X","X","O","O","X","O"],["O","X","X","O","O","X","O","O","O","O","O","X","O","O","O","X","X","O","X","O","O","O","X","X","X","X","O","O","O","O","X","O","X","O","X","X","O","X","X","O","X","O","O","X","O","X","O","O","O","O"],["O","X","O","X","X","O","O","X","X","O","O","X","O","X","X","X","O","O","O","O","O","O","O","O","O","X","X","O","X","O","X","O","O","O","X","O","X","O","O","X","X","O","X","X","X","X","O","X","O","X"],["O","O","O","O","O","X","O","X","X","X","O","O","O","X","X","O","O","X","X","X","X","X","X","X","O","X","O","O","X","O","O","X","O","X","O","O","X","X","O","X","O","X","O","O","X","X","O","X","X","O"],["X","X","X","O","O","X","O","O","X","X","X","X","O","O","X","X","O","O","O","X","O","X","X","X","X","O","O","X","X","O","O","O","X","X","X","X","O","X","X","X","X","O","X","X","O","O","X","O","X","O"],["X","O","O","O","O","O","O","O","X","X","O","X","X","O","O","O","O","O","O","O","X","X","O","X","X","X","O","X","O","X","X","X","X","X","X","O","X","X","X","X","O","X","O","O","X","X","O","O","O","X"],["O","X","X","X","X","X","X","X","X","O","X","X","X","O","O","X","X","O","O","O","O","O","X","O","X","O","X","X","X","X","O","O","X","O","X","X","X","O","X","O","O","X","X","X","X","X","O","X","X","O"],["O","O","O","O","X","O","X","O","O","O","X","X","X","O","X","X","X","O","O","O","O","O","X","O","X","X","O","O","O","X","X","O","O","X","O","O","O","X","O","X","X","X","X","O","X","O","X","X","X","O"],["O","O","O","X","O","O","O","X","O","O","O","X","O","X","O","X","X","O","X","X","O","X","X","O","O","X","O","O","X","O","O","O","O","O","X","O","X","O","O","X","O","O","O","O","O","X","O","O","X","O"],["O","O","X","O","O","O","X","X","X","O","X","O","X","X","X","O","O","X","O","X","X","X","O","O","X","X","X","O","O","O","X","O","O","O","O","X","X","X","X","X","O","X","X","X","X","X","X","X","O","O"],["O","O","X","O","X","O","X","O","X","X","O","O","X","O","X","O","X","X","O","X","X","X","O","O","X","O","X","X","X","O","O","X","X","O","X","O","O","X","O","X","O","O","X","X","O","X","X","O","O","X"],["O","X","X","O","X","X","O","O","O","X","X","O","O","X","O","O","O","O","O","X","O","X","X","X","O","O","X","O","O","X","O","X","X","X","O","X","X","X","O","O","X","O","X","O","O","X","X","X","X","O"],["X","X","O","O","O","O","X","O","O","X","O","X","X","O","X","X","X","X","O","O","O","O","X","X","O","O","X","O","O","O","O","X","O","O","X","X","O","X","O","X","X","O","X","X","X","X","O","O","X","X"],["X","X","X","O","O","X","O","O","X","O","X","X","X","X","O","O","X","O","O","O","O","O","X","O","O","X","X","X","O","X","X","O","O","X","X","X","O","O","O","O","X","X","X","O","X","O","O","X","X","O"],["X","X","O","O","X","X","X","O","X","O","X","O","X","X","O","O","X","X","O","X","X","O","O","X","X","X","O","X","X","O","X","X","X","O","X","X","O","X","X","O","X","X","O","O","X","O","O","X","O","X"],["O","O","X","O","O","X","O","X","O","X","X","X","X","X","O","O","X","O","X","O","X","O","O","X","X","X","X","X","O","O","X","X","X","O","X","X","X","O","X","X","O","X","O","X","X","X","O","X","X","X"],["O","O","O","X","O","O","O","X","O","X","O","O","O","X","O","O","O","X","X","O","X","O","X","X","O","O","O","X","O","X","O","X","O","X","O","O","O","O","X","X","X","O","O","X","O","X","X","X","X","X"],["O","X","X","X","X","X","X","X","O","O","X","X","X","O","O","O","O","O","O","X","X","O","X","X","X","X","O","X","X","X","X","O","X","X","X","O","X","O","X","X","O","X","O","X","X","X","X","O","O","O"],["X","O","O","X","X","X","X","O","O","X","O","X","X","O","X","O","X","O","X","X","X","X","X","O","O","O","O","X","X","O","X","O","O","X","O","O","O","O","O","X","O","O","X","O","O","X","X","X","X","X"],["O","X","O","X","O","X","O","O","O","X","X","O","X","X","O","X","X","X","X","X","O","O","X","O","X","O","O","X","X","X","O","X","O","X","X","O","O","X","O","O","O","X","X","X","O","O","O","O","O","O"],["O","O","O","O","O","X","O","X","X","X","X","O","X","X","O","X","O","X","O","O","X","O","X","O","O","X","X","X","X","X","O","O","O","O","X","O","O","X","X","O","X","O","O","X","O","O","X","O","O","X"],["X","O","O","O","O","O","X","X","X","O","X","O","O","O","X","O","O","O","X","O","O","O","O","X","O","X","O","O","X","O","X","O","O","X","O","X","O","X","X","X","O","O","O","O","X","X","X","X","X","X"],["O","X","X","O","X","O","X","X","O","O","X","X","O","O","X","X","X","X","O","X","X","O","O","O","X","O","X","O","O","X","X","X","O","X","X","O","O","O","X","X","O","O","X","O","O","X","X","X","X","X"],["O","X","X","X","X","O","O","X","X","X","O","X","O","O","O","X","O","X","X","X","X","X","X","X","O","O","O","O","O","X","O","X","O","X","X","X","O","O","X","X","O","X","X","X","O","X","X","X","O","X"],["X","O","X","X","X","X","X","O","O","O","O","O","X","X","O","O","O","X","X","X","O","X","O","X","O","X","X","X","X","X","X","X","O","O","O","O","X","O","X","O","O","O","O","O","X","X","X","O","O","X"]]
print(Solution().updateXs(grid=board))